{"conversation":[{"user":"System","message":"Здравейте!","timestamp":1636196284706},{"user":"kristiyan","message":"Здравейте! Test message","timestamp":1636196284706},{"user":"kristiyan","message":"Здравейте! Test message x2","timestamp":1636196284706},{"user":"Mitko","message":"Zdrasti","timestamp":1636196284706},{"user":"Alena","message":"Здравейте!...","timestamp":1636196284706},{"user":"Nikola","message":"Здравейте!Test","timestamp":1636196284706},{"user":"Tsveti","message":"Здравейте!","timestamp":1636196284706},{"user":"Misha","message":"Hello there!","timestamp":1636196284706},{"user":"Vanessa","message":"Hi","timestamp":1636196284706},{"user":"Simeon","message":"Hello there!","timestamp":1636196284706},{"user":"Vanessa","message":"Как сте днес?","timestamp":1636196284706},{"user":"Violeta","message":"Hi! :)","timestamp":1636196284706},{"user":"Deyan","message":"Hiii!!! :)","timestamp":1636196284706},{"user":"Tedo","message":"fewfew","timestamp":1636364332369},{"user":"Tedo","message":"оуоу","timestamp":1636364458974},{"user":"Tedo","message":"оуоу","timestamp":1636364528928},{"user":"Tedo","message":"оуоуоу","timestamp":1636364554481},{"user":"Tedo","message":"оуоуоуожеуже","timestamp":1636364557331},{"user":"Tedo","message":"оуоуоуожеуже","timestamp":1636364557698},{"user":"Tedo","message":"оеуоу","timestamp":1636364659371},{"user":"Tedo","message":"43и43","timestamp":1636364687475},{"user":"Tedo","message":"43и43","timestamp":1636364687888},{"user":"Misha","message":"yay","timestamp":1636364770214},{"user":"Tedo2","message":"оеуоу","timestamp":1636364881059},{"user":"Tedo2","message":"оеуоу","timestamp":1636364890289},{"user":"Tedo2","message":"оеуоу","timestamp":1636364890447},{"user":"Tedo2","message":"оеуоу","timestamp":1636364890653},{"user":"Tedo2","message":"оеуоу","timestamp":1636364890786},{"user":"Tedo2","message":"34и32","timestamp":1636364892077},{"user":"Tedo2","message":"34и32","timestamp":1636364892415},{"user":"Tedo2","message":"34и32","timestamp":1636364892633},{"user":"Tedo2","message":"34и32","timestamp":1636364892834},{"user":"Tedo2","message":"и32и2","timestamp":1636364895484},{"user":"Tedo2","message":"fewfewf","timestamp":1636364897392},{"user":"Tedo2","message":"fewfewf","timestamp":1636364897669},{"user":"Tedo2","message":"fewfewf","timestamp":1636364897833},{"user":"Tedo2","message":"fewfw","timestamp":1636364909319},{"user":"Tedo2","message":"fewfwe","timestamp":1636364990364},{"user":"Tedo2","message":"fewfwe","timestamp":1636364991370},{"user":"Tedo2","message":"fewfwegew","timestamp":1636364995178},{"user":"kristiyan","message":"hi","timestamp":1636365008257},{"user":"kristiyan","message":"hi","timestamp":1636365010506},{"user":"Vanessa","message":"Unicorn","timestamp":1636365019532},{"user":"Tsveti","message":"Hello","timestamp":1636365037042},{"user":"Tsveti","message":"Hello","timestamp":1636365040586},{"user":"Violeta","message":"hh\n","timestamp":1636365043906},{"user":"kristiyan","message":"sdf","timestamp":1636365069297},{"user":"Vanessa","message":"Unicorn","timestamp":1636365070614},{"user":"Tedo2","message":"goshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshko\n","timestamp":1636365120938},{"user":"kristiyan","message":"hi","timestamp":1636365119080},{"user":"Tedo2","message":"goshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshko\n","timestamp":1636365124593},{"user":"Tedo2","message":"goshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshko\n","timestamp":1636365124861},{"user":"Tedo2","message":"goshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshkogoshko\n","timestamp":1636365125053},{"user":"Vanessa","message":"Hello\n","timestamp":1636365123760},{"user":"Tsveti","message":"opa","timestamp":1636365125726},{"user":"Violeta","message":"msg","timestamp":1636365131482},{"user":"Deyan","message":"hiii","timestamp":1636365133786},{"user":"Misha","message":"hi","timestamp":1636365141223},{"user":"Violeta","message":"msgsgsg","timestamp":1636365147264},{"user":"Tedo2","message":"goshkogoshkogoshkogoshkogoshko","timestamp":1636365155435},{"user":"Tedo2","message":"goshkogoshkogoshkogoshkogoshko","timestamp":1636365160520},{"user":"Vanessa","message":"Да правим Kahoot-a тук вече? :D\n","timestamp":1636365161313},{"user":"Mitko","message":"alo","timestamp":1636365168206},{"user":"kristiyan","message":"test","timestamp":1636365229193},{"user":"Tedo2","message":"fw","timestamp":1636365250450},{"user":"Tsveti","message":"alo","timestamp":1636365259713},{"user":"Tedo2","message":"\/\/ [Step 1] Change the USERNAME const to your (user)name. This will be used as your chat handle.\n\/\/ Then refresh the page and copy the message in the console.\nconst USERNAME = \"Tedo2\"; \/\/ Change it to your username\n\nlet chatConversationElement;\nlet sendButtonElement;\nlet messageTextAreaElement;\n\ndocument.addEventListener(\"DOMContentLoaded\", e => {\n\tinit()\n})\n\nfunction init() {\n\tconsole.log(`[Step 1 Completed] ${USERNAME} has successfully loaded the js file at ${Date.now()}`)\n\n\n\t\/\/ [Step 2] create js instances to the HTML elements that will be used by us\n\n\t\/\/ chatConversationElement should point to an element with id \"chat-conversation\"\n\tchatConversationElement = document.getElementById(\"chat-conversation\");\n\t\/\/ sendButtonElement should point to the send button element in the index.html file\n\tsendButtonElement = document.getElementById(\"send-btn\");\n\t\/\/ messageTextAreaElement should point to the text area\n\tmessageTextAreaElement = document.getElementById(\"text-message\");\n\n\t\/\/ Преди да продължите към стъпка 3, рефрешнете браузъра. Трябва да получите съобщение в конзолата за\n\t\/\/ успешно завършена стъпка 2. Изпратете съобщението в zoom chat-a.\n\tif (chatConversationElement &&\n\t\tsendButtonElement &&\n\t\tmessageTextAreaElement &&\n\t\tObject.getPrototypeOf(chatConversationElement).constructor.name == \"HTMLUListElement\" &&\n\t\tObject.getPrototypeOf(sendButtonElement).constructor.name == \"HTMLButtonElement\" &&\n\t\tObject.getPrototypeOf(messageTextAreaElement).constructor.name == \"HTMLTextAreaElement\"\n\t) {\n\t\tconsole.log(`[Step 2 Completed] ${USERNAME} has successfully created instances of the chat UI elements`)\n\t}\n\n\tinitElementEventHandlers(sendButtonElement, messageTextAreaElement)\n\tvar intervalID = setInterval(updateChat, 2000);\n\t\/\/ [Step 7] Използвайте setInterval за да извиквате updateChat на всеки 2000ms\n}\n\n\/\/ [Step 3] Имплементирайте функцията. След това натиснете send бутона и изпратете съобщението от конзолата\n\/\/ в zoom\nfunction initElementEventHandlers(sendButtonElement, messageTextAreaElement) {\n\t\/\/ Добавете handler за click евент, който да извиква sendMessage функцията. Подсказка - 7-ми ред\n\nsendButtonElement.addEventListener('click', sendMessage);\n\n\t\/\/ sendButtonElement...\n\n\t\/\/ (По желание) Добавете handler за евент, който да извиква sendMessage функцията при натискане на Enter\n\t\/\/ messageTextAreaElement...\n}\n\nfunction sendMessage(e) {\n\tconsole.log(`[Step 3 Completed] ${USERNAME} has successfully initialized the event handlers ${Date.now()}`)\n\n\tlet msgObj = getMessageObject()\n\t\/\/ [Step 6] Изпратете POST request с JSON.stringify-нат  message към \"SERVER_URL\/sendMessage.php\".\n\t\/\/ С полученият response извикайте renerConversation.php\n\t\/\/ FINALE\n\tfetch('http:\/\/0df9-154-14-30-2.ngrok.io\/sendMessage.php', {\n\t\tmethod: 'post',\n\t\tbody: JSON.stringify(msgObj)\n\t  }).then(response => response.json()).then(renderConversation);\n\n\t\/\/ fetch(...).\n\t\/\/\tthen(...).\n\t\/\/\tthen(...)\n}\n\n\/\/ [Step 4] Използвайте fetch API-то, за да извикате (изпратите GET request към) \"SERVER_URL\/getConversation.php\"\n\/\/ Получения JSON подайте на renderConversation като параметър. Трябва да видите хронологията от чата на\n\/\/ екрана си(в ul)\nfunction updateChat() {\n\t fetch(\"http:\/\/0df9-154-14-30-2.ngrok.io\/getConversation.php\").\n\t\tthen(response => response.json()).\n\t\tthen(renderConversation)\n}\n\nfunction getMessageObject() {\n\t\/\/ [Step 5] Вземете стойноста на messageTextAreaElement и заместете \"message text\" с нея. Hint: .value attribute\n\tlet msg = messageTextAreaElement.value;\n\tlet message = \"message text\" \/\/ TODO get messageTextAreaElement's value\n\tmessage = msg;\n\treturn {\n\t\tuser: USERNAME,\n\t\tmessage: message,\n\t\ttimestamp: +new Date()\n\t}\n}\n\nfunction renderConversation(conversationJSON) {\n\tchatConversationElement.innerHTML = \"\"\n\tfor (const msg of conversationJSON.conversation) {\n\t\tif(msg){\n\t\tlet li = document.createElement(\"li\")\n\t\tli.innerHTML = `<strong>${msg.user}<\/strong>: ${msg.message}`\n\t\tchatConversationElement.appendChild(li);\n\t\t}\n\t}\n}","timestamp":1636365274588},{"user":"Tedo2","message":"zdr kopr","timestamp":1636365330184},{"user":"Tedo2","message":"ehooo","timestamp":1636365357274},{"user":"Deyan","message":"hello","timestamp":1636365440374},{"user":"Tedo2","message":"fewfw","timestamp":1636365515132},{"user":"Violeta","message":"ksHFLbvB","timestamp":1636365522834},{"user":"Deyan","message":"hiiiiii","timestamp":1636365527468},{"user":"Misha","message":"wat","timestamp":1636365529676},{"user":"Violeta","message":"ksHFLbvHSHS","timestamp":1636365531044},{"user":"Mitko","message":"alo","timestamp":1636365536084},{"user":"Alena","message":"henlo\n","timestamp":1636365615255},{"user":"Vanessa","message":"","timestamp":1636365617458},{"user":"Tedo2","message":"koi e tam\n","timestamp":1636365622617},{"user":"Deyan","message":"hey","timestamp":1636365621944},{"user":"kristiyan","message":"test","timestamp":1636365639774},{"user":"Tedo2","message":"few","timestamp":1636365729391},{"user":"Vanessa","message":"hii\n","timestamp":1636365728814},{"user":"Misha","message":"hi","timestamp":1636365732577},{"user":"Tedo2","message":"това е съобщение\n","timestamp":1636365739387},{"user":"Tedo2","message":"ѝизпращам пак едно съобщшение\n","timestamp":1636365776155},{"user":"Tedo2","message":"да видим дали работи","timestamp":1636365781912},{"user":"Alena","message":"message","timestamp":1636365781551},{"user":"Tedo2","message":"ciao","timestamp":1636365948545}]}